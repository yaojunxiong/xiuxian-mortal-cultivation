<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>凡人入门 · 修仙章节</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="hero">
    <div class="hero__content">
      <p class="badge">第1章 · 凡人入门</p>
      <h1>宗门起步任务</h1>
      <p class="lede">按顺序推进宗门登记、采药试炼、初战考验，所有进度自动保存在浏览器。</p>
      <div class="hero__actions">
        <button id="reset-btn" class="ghost">重置进度</button>
        <button id="export-btn" class="primary">导出剧情/台词</button>
      </div>
    </div>
    <div class="hero__illus" aria-hidden="true">
      <div class="orbit"><span></span><span></span><span></span></div>
    </div>
  </header>

  <main class="layout">
    <section class="panel" aria-labelledby="chapter-title">
      <div class="panel__head">
        <div>
          <p class="eyebrow">章节信息</p>
          <h2 id="chapter-title">第1章：凡人入门</h2>
        </div>
        <span class="pill" id="quest-pill">准备中…</span>
      </div>
      <div class="chapter-grid">
        <article class="chapter-card">
          <h3>当前任务</h3>
          <p id="quest-title" class="lede">-</p>
          <ul class="list" id="quest-goal"></ul>
          <div class="hint" id="quest-conditions"></div>
        </article>
        <article class="chapter-card">
          <div class="npc-header">
            <div>
              <h3>NPC 对话</h3>
              <p class="eyebrow" id="npc-name">-</p>
            </div>
            <img id="npc-avatar" class="npc-avatar" src="assets/npcs/placeholder.png" alt="NPC 头像">
          </div>
          <div id="dialogue-box" class="dialogue-box">尚未触发对话</div>
          <div class="chip-row">
            <button id="next-dialogue" class="primary">对话下一句</button>
            <button id="yield-btn" class="ghost" disabled>退让</button>
            <button id="fight-btn" class="ghost" disabled>硬拼</button>
          </div>
        </article>
        <article class="chapter-card">
          <h3>玩家状态</h3>
          <div class="status-grid" id="player-status"></div>
          <div class="bag" id="player-bag"></div>
        </article>
      </div>
    </section>

    <section class="panel" aria-labelledby="area-title">
      <div class="panel__head">
        <div>
          <p class="eyebrow">区域按钮</p>
          <h2 id="area-title">切换位置以触发任务</h2>
        </div>
        <span class="pill pill--ghost" id="location-pill">山门</span>
      </div>
      <div class="area-grid">
        <button data-area="山门" class="area">进入山门</button>
        <button data-area="外门区" class="area">外门区</button>
        <button data-area="后山采药区" class="area">进入后山采药区</button>
        <button data-area="考核石台" class="area">进入考核石台</button>
        <button id="collect-btn" class="area" disabled>采集灵草</button>
        <button id="return-btn" class="area" disabled>返回外门区</button>
      </div>
      <div class="log" id="system-log"></div>
    </section>

    <section class="panel" aria-labelledby="summary-title">
      <div class="panel__head">
        <div>
          <p class="eyebrow">章节结算</p>
          <h2 id="summary-title">分支结果与奖励</h2>
        </div>
        <span class="pill pill--ghost" id="reward-pill">未完成</span>
      </div>
      <div id="summary-box" class="dialogue-box">完成初战考验后显示奖励与结语。</div>
    </section>
  </main>

  <div id="export-modal" class="modal" aria-hidden="true">
    <div class="modal__body">
      <div class="modal__head">
        <h3>剧情/台词导出</h3>
        <button id="close-modal" class="ghost">关闭</button>
      </div>
      <p class="lede">以下文本可直接复制，亦同步至 <code>export/minecraft_npc.txt</code>。</p>
      <textarea id="export-text" rows="16"></textarea>
    </div>
  </div>

  <footer class="footer">
    <p>所有进度保存在浏览器 localStorage，随时可点击“重置进度”重新体验。</p>
    <p>导出文本位于 <code>export/minecraft_npc.txt</code>，可复制到 MC Education NPC 对话框。</p>
  </footer>

  <script src="main.js"></script>
</body>
</html>
